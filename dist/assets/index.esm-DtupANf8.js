import{j as e}from"./vendor-animation-CJtHBrp0.js";import{r as t,R as r}from"./vendor-react-BWWlGG6F.js";import{b as s,c as a,H as i,T as n,d as o}from"./vendor-ui-B7CUgBk4.js";import{c as l}from"./utils-saXQ47LU.js";import{i as u}from"./vendor-utils-BKbjwtF7.js";const d=s,f=t.forwardRef(({className:t,...r},s)=>e.jsx(a,{ref:s,className:l("border-b",t),...r}));f.displayName="AccordionItem";const c=t.forwardRef(({className:t,children:r,...s},a)=>e.jsx(i,{className:"flex",children:e.jsxs(n,{ref:a,className:l("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180","accordion-trigger",t),...s,children:[r,e.jsx(u,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));c.displayName=n.displayName;const m=t.forwardRef(({className:t,children:r,...s},a)=>e.jsx(o,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:e.jsx("div",{className:l("pb-4 pt-0",t),children:r})}));m.displayName=o.displayName;var y=e=>"checkbox"===e.type,h=e=>e instanceof Date,v=e=>null==e;const g=e=>"object"==typeof e;var p=e=>!v(e)&&!Array.isArray(e)&&g(e)&&!h(e),b="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function _(e){let t;const r=Array.isArray(e),s="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(b&&(e instanceof Blob||s)||!r&&!p(e))return e;if(t=r?[]:Object.create(Object.getPrototypeOf(e)),r||(e=>{const t=e.constructor&&e.constructor.prototype;return p(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=_(e[r]));else t=e}return t}var V=e=>/^\w*$/.test(e),F=e=>void 0===e,A=e=>Array.isArray(e)?e.filter(Boolean):[],w=e=>A(e.replace(/["|']|\]/g,"").split(/\.|\[/)),x=(e,t,r)=>{if(!t||!p(e))return r;const s=(V(t)?[t]:w(t)).reduce((e,t)=>v(e)?e:e[t],e);return F(s)||s===e?F(e[t])?r:e[t]:s},S=e=>"boolean"==typeof e,k=(e,t,r)=>{let s=-1;const a=V(t)?[t]:w(t),i=a.length,n=i-1;for(;++s<i;){const t=a[s];let i=r;if(s!==n){const r=e[t];i=p(r)||Array.isArray(r)?r:isNaN(+a[s+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=i,e=e[t]}};const D="blur",O="focusout",E="onBlur",N="onChange",j="onSubmit",C="onTouched",T="all",L="max",M="min",R="maxLength",U="minLength",B="pattern",P="required",q="validate";r.createContext(null).displayName="HookFormContext";const I="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;var W=e=>"string"==typeof e,H=e=>v(e)||!g(e);function $(e,t,r=new WeakSet){if(H(e)||H(t))return e===t;if(h(e)&&h(t))return e.getTime()===t.getTime();const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const s=e[i];if(!a.includes(i))return!1;if("ref"!==i){const e=t[i];if(h(s)&&h(e)||p(s)&&p(e)||Array.isArray(s)&&Array.isArray(e)?!$(s,e,r):s!==e)return!1}}return!0}var z=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},G=e=>Array.isArray(e)?e:[e],J=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function K(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const a=e[s],i=t[s];if(a&&p(a)&&i){const e=K(a,i);p(e)&&(r[s]=e)}else e[s]&&(r[s]=i)}return r}var Q=e=>p(e)&&!Object.keys(e).length,X=e=>"file"===e.type,Y=e=>"function"==typeof e,Z=e=>{if(!b)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ee=e=>"select-multiple"===e.type,te=e=>"radio"===e.type,re=e=>Z(e)&&e.isConnected;function se(e,t){const r=Array.isArray(t)?t:V(t)?[t]:w(t),s=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=F(e)?s++:e[t[s++]];return e}(e,r),a=r.length-1,i=r[a];return s&&delete s[i],0!==a&&(p(s)&&Q(s)||Array.isArray(s)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!F(e[t]))return!1;return!0}(s))&&se(e,r.slice(0,-1)),e}function ae(e){return Array.isArray(e)||p(e)&&!(e=>{for(const t in e)if(Y(e[t]))return!0;return!1})(e)}function ie(e,t={}){for(const r in e)ae(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ie(e[r],t[r])):F(e[r])||(t[r]=!0);return t}function ne(e,t,r){r||(r=ie(t));for(const s in e)ae(e[s])?F(t)||H(r[s])?r[s]=ie(e[s],Array.isArray(e[s])?[]:{}):ne(e[s],v(t)?{}:t[s],r[s]):r[s]=!$(e[s],t[s]);return r}const oe={value:!1,isValid:!1},le={value:!0,isValid:!0};var ue=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!F(e[0].attributes.value)?F(e[0].value)||""===e[0].value?le:{value:e[0].value,isValid:!0}:le:oe}return oe},de=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>F(e)?e:t?""===e?NaN:e?+e:e:r&&W(e)?new Date(e):s?s(e):e;const fe={isValid:!1,value:null};var ce=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,fe):fe;function me(e){const t=e.ref;return X(t)?t.files:te(t)?ce(e.refs).value:ee(t)?[...t.selectedOptions].map(({value:e})=>e):y(t)?ue(e.refs).value:de(F(t.value)?e.ref.value:t.value,e)}var ye=e=>e instanceof RegExp,he=e=>F(e)?e:ye(e)?e.source:p(e)?ye(e.value)?e.value.source:e.value:e,ve=e=>({isOnSubmit:!e||e===j,isOnBlur:e===E,isOnChange:e===N,isOnAll:e===T,isOnTouch:e===C});const ge="AsyncFunction";var pe=e=>!!e&&!!e.validate&&!!(Y(e.validate)&&e.validate.constructor.name===ge||p(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===ge)),be=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const _e=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const r=x(e,a);if(r){const{_f:e,...i}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!s)return!0;if(e.ref&&t(e.ref,e.name)&&!s)return!0;if(_e(i,t))break}else if(p(i)&&_e(i,t))break}}};function Ve(e,t,r){const s=x(e,r);if(s||V(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=x(t,s),n=x(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(n&&n.type)return{name:s,error:n};if(n&&n.root&&n.root.type)return{name:`${s}.root`,error:n.root};a.pop()}return{name:r}}var Fe=(e,t,r)=>{const s=G(x(e,r));return k(s,"root",t[r]),k(e,r,s),e};function Ae(e,t,r="validate"){if(W(e)||Array.isArray(e)&&e.every(W)||S(e)&&!e)return{type:r,message:W(e)?e:"",ref:t}}var we=e=>p(e)&&!ye(e)?e:{value:e,message:""},xe=async(e,t,r,s,a,i)=>{const{ref:n,refs:o,required:l,maxLength:u,minLength:d,min:f,max:c,pattern:m,validate:h,name:g,valueAsNumber:b,mount:_}=e._f,V=x(r,g);if(!_||t.has(g))return{};const A=o?o[0]:n,w=e=>{a&&A.reportValidity&&(A.setCustomValidity(S(e)?"":e||""),A.reportValidity())},k={},D=te(n),O=y(n),E=D||O,N=(b||X(n))&&F(n.value)&&F(V)||Z(n)&&""===n.value||""===V||Array.isArray(V)&&!V.length,j=z.bind(null,g,s,k),C=(e,t,r,s=R,a=U)=>{const i=e?t:r;k[g]={type:e?s:a,message:i,ref:n,...j(e?s:a,i)}};if(i?!Array.isArray(V)||!V.length:l&&(!E&&(N||v(V))||S(V)&&!V||O&&!ue(o).isValid||D&&!ce(o).isValid)){const{value:e,message:t}=W(l)?{value:!!l,message:l}:we(l);if(e&&(k[g]={type:P,message:t,ref:A,...j(P,t)},!s))return w(t),k}if(!(N||v(f)&&v(c))){let e,t;const r=we(c),a=we(f);if(v(V)||isNaN(V)){const s=n.valueAsDate||new Date(V),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==n.type,l="week"==n.type;W(r.value)&&V&&(e=o?i(V)>i(r.value):l?V>r.value:s>new Date(r.value)),W(a.value)&&V&&(t=o?i(V)<i(a.value):l?V<a.value:s<new Date(a.value))}else{const s=n.valueAsNumber||(V?+V:V);v(r.value)||(e=s>r.value),v(a.value)||(t=s<a.value)}if((e||t)&&(C(!!e,r.message,a.message,L,M),!s))return w(k[g].message),k}if((u||d)&&!N&&(W(V)||i&&Array.isArray(V))){const e=we(u),t=we(d),r=!v(e.value)&&V.length>+e.value,a=!v(t.value)&&V.length<+t.value;if((r||a)&&(C(r,e.message,t.message),!s))return w(k[g].message),k}if(m&&!N&&W(V)){const{value:e,message:t}=we(m);if(ye(e)&&!V.match(e)&&(k[g]={type:B,message:t,ref:n,...j(B,t)},!s))return w(t),k}if(h)if(Y(h)){const e=Ae(await h(V,r),A);if(e&&(k[g]={...e,...j(q,e.message)},!s))return w(e.message),k}else if(p(h)){let e={};for(const t in h){if(!Q(e)&&!s)break;const a=Ae(await h[t](V,r),A,t);a&&(e={...a,...j(t,a.message)},w(a.message),s&&(k[g]=e))}if(!Q(e)&&(k[g]={ref:A,...e},!s))return k}return w(!0),k};const Se={mode:j,reValidateMode:N,shouldFocusError:!0};function ke(e={}){let t,r={...Se,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:Y(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},a={},i=(p(r.defaultValues)||p(r.values))&&_(r.defaultValues||r.values)||{},n=r.shouldUnregister?{}:_(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const c={array:J(),state:J()},m=r.criteriaMode===T,g=async e=>{if(!r.disabled&&(d.isValid||f.isValid||e)){const e=r.resolver?Q((await j()).errors):await C(a,!0);e!==s.isValid&&c.state.next({isValid:e})}},V=(e,t)=>{!r.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?k(s.validatingFields,e,t):se(s.validatingFields,e))}),c.state.next({validatingFields:s.validatingFields,isValidating:!Q(s.validatingFields)}))},w=(e,t,r,s)=>{const l=x(a,e);if(l){const a=x(n,e,F(r)?x(i,e):r);F(a)||s&&s.defaultChecked||t?k(n,e,t?a:me(l._f)):R(e,a),o.mount&&g()}},E=(e,t,a,n,o)=>{let l=!1,u=!1;const m={name:e};if(!r.disabled){if(!a||n){(d.isDirty||f.isDirty)&&(u=s.isDirty,s.isDirty=m.isDirty=L(),l=u!==m.isDirty);const r=$(x(i,e),t);u=!!x(s.dirtyFields,e),r?se(s.dirtyFields,e):k(s.dirtyFields,e,!0),m.dirtyFields=s.dirtyFields,l=l||(d.dirtyFields||f.dirtyFields)&&u!==!r}if(a){const t=x(s.touchedFields,e);t||(k(s.touchedFields,e,a),m.touchedFields=s.touchedFields,l=l||(d.touchedFields||f.touchedFields)&&t!==a)}l&&o&&c.state.next(m)}return l?m:{}},N=(e,a,i,n)=>{const o=x(s.errors,e),l=(d.isValid||f.isValid)&&S(a)&&s.isValid!==a;var m;if(r.delayError&&i?(m=()=>((e,t)=>{k(s.errors,e,t),c.state.next({errors:s.errors})})(e,i),t=e=>{clearTimeout(u),u=setTimeout(m,e)},t(r.delayError)):(clearTimeout(u),t=null,i?k(s.errors,e,i):se(s.errors,e)),(i?!$(o,i):o)||!Q(n)||l){const t={...n,...l&&S(a)?{isValid:a}:{},errors:s.errors,name:e};s={...s,...t},c.state.next(t)}},j=async e=>{V(e,!0);const t=await r.resolver(n,r.context,((e,t,r,s)=>{const a={};for(const i of e){const e=x(t,i);e&&k(a,i,e._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}})(e||l.mount,a,r.criteriaMode,r.shouldUseNativeValidation));return V(e),t},C=async(e,t,a={valid:!0})=>{for(const i in e){const o=e[i];if(o){const{_f:e,...i}=o;if(e){const i=l.array.has(e.name),u=o._f&&pe(o._f);u&&d.validatingFields&&V([e.name],!0);const f=await xe(o,l.disabled,n,m,r.shouldUseNativeValidation&&!t,i);if(u&&d.validatingFields&&V([e.name]),f[e.name]&&(a.valid=!1,t))break;!t&&(x(f,e.name)?i?Fe(s.errors,f,e.name):k(s.errors,e.name,f[e.name]):se(s.errors,e.name))}!Q(i)&&await C(i,t,a)}}return a.valid},L=(e,t)=>!r.disabled&&(e&&t&&k(n,e,t),!$(H(),i)),M=(e,t,r)=>((e,t,r,s,a)=>W(e)?(s&&t.watch.add(e),x(r,e,a)):Array.isArray(e)?e.map(e=>(s&&t.watch.add(e),x(r,e))):(s&&(t.watchAll=!0),r))(e,l,{...o.mount?n:F(t)?i:W(e)?{[e]:t}:t},r,t),R=(e,t,r={})=>{const s=x(a,e);let i=t;if(s){const r=s._f;r&&(!r.disabled&&k(n,e,de(t,r)),i=Z(r.ref)&&v(t)?"":t,ee(r.ref)?[...r.ref.options].forEach(e=>e.selected=i.includes(e.value)):r.refs?y(r.ref)?r.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(i)?e.checked=!!i.find(t=>t===e.value):e.checked=i===e.value||!!i)}):r.refs.forEach(e=>e.checked=e.value===i):X(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||c.state.next({name:e,values:_(n)})))}(r.shouldDirty||r.shouldTouch)&&E(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&I(e)},U=(e,t,r)=>{for(const s in t){if(!t.hasOwnProperty(s))return;const i=t[s],n=e+"."+s,o=x(a,n);(l.array.has(e)||p(i)||o&&!o._f)&&!h(i)?U(n,i,r):R(n,i,r)}},B=(e,t,r={})=>{const u=x(a,e),m=l.array.has(e),y=_(t);k(n,e,y),m?(c.array.next({name:e,values:_(n)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&r.shouldDirty&&c.state.next({name:e,dirtyFields:ne(i,n),isDirty:L(e,y)})):!u||u._f||v(y)?R(e,y,r):U(e,y,r),be(e,l)&&c.state.next({...s,name:e}),c.state.next({name:o.mount?e:void 0,values:_(n)})},P=async e=>{o.mount=!0;const i=e.target;let u=i.name,v=!0;const b=x(a,u),F=e=>{v=Number.isNaN(e)||h(e)&&isNaN(e.getTime())||$(e,x(n,u,e))},A=ve(r.mode),w=ve(r.reValidateMode);if(b){let o,h;const T=i.type?me(b._f):(e=>p(e)&&e.target?y(e.target)?e.target.checked:e.target.value:e)(e),L=e.type===D||e.type===O,M=!((S=b._f).mount&&(S.required||S.min||S.max||S.maxLength||S.minLength||S.pattern||S.validate)||r.resolver||x(s.errors,u)||b._f.deps)||((e,t,r,s,a)=>!a.isOnAll&&(!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:!(r?s.isOnChange:a.isOnChange)||e))(L,x(s.touchedFields,u),s.isSubmitted,w,A),R=be(u,l,L);k(n,u,T),L?i&&i.readOnly||(b._f.onBlur&&b._f.onBlur(e),t&&t(0)):b._f.onChange&&b._f.onChange(e);const U=E(u,T,L),B=!Q(U)||R;if(!L&&c.state.next({name:u,type:e.type,values:_(n)}),M)return(d.isValid||f.isValid)&&("onBlur"===r.mode?L&&g():L||g()),B&&c.state.next({name:u,...R?{}:U});if(!L&&R&&c.state.next({...s}),r.resolver){const{errors:e}=await j([u]);if(F(T),v){const t=Ve(s.errors,a,u),r=Ve(e,a,t.name||u);o=r.error,u=r.name,h=Q(e)}}else V([u],!0),o=(await xe(b,l.disabled,n,m,r.shouldUseNativeValidation))[u],V([u]),F(T),v&&(o?h=!1:(d.isValid||f.isValid)&&(h=await C(a,!0)));v&&(b._f.deps&&(!Array.isArray(b._f.deps)||b._f.deps.length>0)&&I(b._f.deps),N(u,h,o,U))}var S},q=(e,t)=>{if(x(s.errors,t)&&e.focus)return e.focus(),1},I=async(e,t={})=>{let i,n;const o=G(e);if(r.resolver){const t=await(async e=>{const{errors:t}=await j(e);if(e)for(const r of e){const e=x(t,r);e?k(s.errors,r,e):se(s.errors,r)}else s.errors=t;return t})(F(e)?e:o);i=Q(t),n=e?!o.some(e=>x(t,e)):i}else e?(n=(await Promise.all(o.map(async e=>{const t=x(a,e);return await C(t&&t._f?{[e]:t}:t)}))).every(Boolean),(n||s.isValid)&&g()):n=i=await C(a);return c.state.next({...!W(e)||(d.isValid||f.isValid)&&i!==s.isValid?{}:{name:e},...r.resolver||!e?{isValid:i}:{},errors:s.errors}),t.shouldFocus&&!n&&_e(a,q,e?o:l.mount),n},H=(e,t)=>{let r={...o.mount?n:i};return t&&(r=K(t.dirtyFields?s.dirtyFields:s.touchedFields,r)),F(e)?r:W(e)?x(r,e):e.map(e=>x(r,e))},z=(e,t)=>({invalid:!!x((t||s).errors,e),isDirty:!!x((t||s).dirtyFields,e),error:x((t||s).errors,e),isValidating:!!x(s.validatingFields,e),isTouched:!!x((t||s).touchedFields,e)}),ae=(e,t,r)=>{const i=(x(a,e,{_f:{}})._f||{}).ref,n=x(s.errors,e)||{},{ref:o,message:l,type:u,...d}=n;k(s.errors,e,{...d,...t,ref:i}),c.state.next({name:e,errors:s.errors,isValid:!1}),r&&r.shouldFocus&&i&&i.focus&&i.focus()},ie=e=>c.state.subscribe({next:t=>{var r,a,o;r=e.name,a=t.name,o=e.exact,r&&a&&r!==a&&!G(r).some(e=>e&&(o?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,r,s)=>{r(e);const{name:a,...i}=e;return Q(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!s||T))})(t,e.formState||d,Ae,e.reRenderRoot)||e.callback({values:{...n},...s,...t,defaultValues:i})}}).unsubscribe,oe=(e,t={})=>{for(const o of e?G(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(se(a,o),se(n,o)),!t.keepError&&se(s.errors,o),!t.keepDirty&&se(s.dirtyFields,o),!t.keepTouched&&se(s.touchedFields,o),!t.keepIsValidating&&se(s.validatingFields,o),!r.shouldUnregister&&!t.keepDefaultValue&&se(i,o);c.state.next({values:_(n)}),c.state.next({...s,...t.keepDirty?{isDirty:L()}:{}}),!t.keepIsValid&&g()},le=({disabled:e,name:t})=>{(S(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},ue=(e,t={})=>{let s=x(a,e);const n=S(t.disabled)||S(r.disabled);return k(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),s?le({disabled:S(t.disabled)?t.disabled:r.disabled,name:e}):w(e,!0,t.value),{...n?{disabled:t.disabled||r.disabled}:{},...r.progressive?{required:!!t.required,min:he(t.min),max:he(t.max),minLength:he(t.minLength),maxLength:he(t.maxLength),pattern:he(t.pattern)}:{},name:e,onChange:P,onBlur:P,ref:n=>{if(n){ue(e,t),s=x(a,e);const r=F(n.value)&&n.querySelectorAll&&n.querySelectorAll("input,select,textarea")[0]||n,o=(e=>te(e)||y(e))(r),l=s._f.refs||[];if(o?l.find(e=>e===r):r===s._f.ref)return;k(a,e,{_f:{...s._f,...o?{refs:[...l.filter(re),r,...Array.isArray(x(i,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),w(e,!1,void 0,r)}else s=x(a,e,{}),s._f&&(s._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&(!((e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)))(l.array,e)||!o.action)&&l.unMount.add(e)}}},fe=()=>r.shouldFocusError&&_e(a,q,l.mount),ce=(e,t)=>async i=>{let o;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let u=_(n);if(c.state.next({isSubmitting:!0}),r.resolver){const{errors:e,values:t}=await j();s.errors=e,u=_(t)}else await C(a);if(l.disabled.size)for(const e of l.disabled)se(u,e);if(se(s.errors,"root"),Q(s.errors)){c.state.next({errors:{}});try{await e(u,i)}catch(d){o=d}}else t&&await t({...s.errors},i),fe(),setTimeout(fe);if(c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Q(s.errors)&&!o,submitCount:s.submitCount+1,errors:s.errors}),o)throw o},ye=(e,t={})=>{const u=e?_(e):i,f=_(u),m=Q(e),y=m?i:f;if(t.keepDefaultValues||(i=u),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(ne(i,n))]);for(const t of Array.from(e))x(s.dirtyFields,t)?k(y,t,x(n,t)):B(t,x(y,t))}else{if(b&&F(e))for(const e of l.mount){const t=x(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Z(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)B(e,x(y,e));else a={}}n=r.shouldUnregister?t.keepDefaultValues?_(i):{}:_(y),c.array.next({values:{...y}}),c.state.next({values:{...y}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!r.shouldUnregister,c.state.next({submitCount:t.keepSubmitCount?s.submitCount:0,isDirty:!m&&(t.keepDirty?s.isDirty:!(!t.keepDefaultValues||$(e,i))),isSubmitted:!!t.keepIsSubmitted&&s.isSubmitted,dirtyFields:m?{}:t.keepDirtyValues?t.keepDefaultValues&&n?ne(i,n):s.dirtyFields:t.keepDefaultValues&&e?ne(i,e):t.keepDirty?s.dirtyFields:{},touchedFields:t.keepTouched?s.touchedFields:{},errors:t.keepErrors?s.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1,defaultValues:i})},ge=(e,t)=>ye(Y(e)?e(n):e,t),Ae=e=>{s={...s,...e}},we={control:{register:ue,unregister:oe,getFieldState:z,handleSubmit:ce,setError:ae,_subscribe:ie,_runSchema:j,_focusError:fe,_getWatch:M,_getDirty:L,_setValid:g,_setFieldArray:(e,t=[],l,u,m=!0,y=!0)=>{if(u&&l&&!r.disabled){if(o.action=!0,y&&Array.isArray(x(a,e))){const t=l(x(a,e),u.argA,u.argB);m&&k(a,e,t)}if(y&&Array.isArray(x(s.errors,e))){const t=l(x(s.errors,e),u.argA,u.argB);m&&k(s.errors,e,t),((e,t)=>{!A(x(e,t)).length&&se(e,t)})(s.errors,e)}if((d.touchedFields||f.touchedFields)&&y&&Array.isArray(x(s.touchedFields,e))){const t=l(x(s.touchedFields,e),u.argA,u.argB);m&&k(s.touchedFields,e,t)}(d.dirtyFields||f.dirtyFields)&&(s.dirtyFields=ne(i,n)),c.state.next({name:e,isDirty:L(e,t),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else k(n,e,t)},_setDisabledField:le,_setErrors:e=>{s.errors=e,c.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>A(x(o.mount?n:i,e,r.shouldUnregister?x(i,e,[]):[])),_reset:ye,_resetDefaultValues:()=>Y(r.defaultValues)&&r.defaultValues().then(e=>{ge(e,r.resetOptions),c.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=x(a,e);t&&(t._f.refs?t._f.refs.every(e=>!re(e)):!re(t._f.ref))&&oe(e)}l.unMount=new Set},_disableForm:e=>{S(e)&&(c.state.next({disabled:e}),_e(a,(t,r)=>{const s=x(a,r);s&&(t.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(t=>{t.disabled=s._f.disabled||e}))},0,!1))},_subjects:c,_proxyFormState:d,get _fields(){return a},get _formValues(){return n},get _state(){return o},set _state(e){o=e},get _defaultValues(){return i},get _names(){return l},set _names(e){l=e},get _formState(){return s},get _options(){return r},set _options(e){r={...r,...e}}},subscribe:e=>(o.mount=!0,f={...f,...e.formState},ie({...e,formState:f})),trigger:I,register:ue,handleSubmit:ce,watch:(e,t)=>Y(e)?c.state.subscribe({next:r=>"values"in r&&e(M(void 0,t),r)}):M(e,t,!0),setValue:B,getValues:H,reset:ge,resetField:(e,t={})=>{x(a,e)&&(F(t.defaultValue)?B(e,_(x(i,e))):(B(e,t.defaultValue),k(i,e,_(t.defaultValue))),t.keepTouched||se(s.touchedFields,e),t.keepDirty||(se(s.dirtyFields,e),s.isDirty=t.defaultValue?L(e,_(x(i,e))):L()),t.keepError||(se(s.errors,e),d.isValid&&g()),c.state.next({...s}))},clearErrors:e=>{e&&G(e).forEach(e=>se(s.errors,e)),c.state.next({errors:e?s.errors:{}})},unregister:oe,setError:ae,setFocus:(e,t={})=>{const r=x(a,e),s=r&&r._f;if(s){const e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),t.shouldSelect&&Y(e.select)&&e.select())}},getFieldState:z};return{...we,formControl:we}}function De(e={}){const t=r.useRef(void 0),s=r.useRef(void 0),[a,i]=r.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!Y(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:r,...s}=ke(e);t.current={...s,formState:a}}const n=t.current.control;return n._options=e,I(()=>{const e=n._subscribe({formState:n._proxyFormState,callback:()=>i({...n._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),n._formState.isReady=!0,e},[n]),r.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),r.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),r.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),r.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),r.useEffect(()=>{if(n._proxyFormState.isDirty){const e=n._getDirty();e!==a.isDirty&&n._subjects.state.next({isDirty:e})}},[n,a.isDirty]),r.useEffect(()=>{e.values&&!$(e.values,s.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),s.current=e.values,i(e=>({...e}))):n._resetDefaultValues()},[n,e.values]),r.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=((e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const r=i;return t._proxyFormState[r]!==T&&(t._proxyFormState[r]=!s||T),e[r]}});return a})(a,n),t.current}export{d as A,f as a,c as b,m as c,De as u};
